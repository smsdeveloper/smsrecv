<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="LS_DBDX">
  <resultMap class="com.slf.engine.bo.LsDbdx" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Apr 17 09:10:59 CST 2014.
    -->
    <result column="DBDXID" jdbcType="DECIMAL" property="dbdxid" />
    <result column="DBGJZ" jdbcType="VARCHAR" property="dbgjz" />
    <result column="YXSJ" jdbcType="VARCHAR" property="yxsj" />
    <result column="SXSJ" jdbcType="VARCHAR" property="sxsj" />
    <result column="DJDBCS" jdbcType="DECIMAL" property="djdbcs" />
    <result column="ZDBCS" jdbcType="DECIMAL" property="zdbcs" />
    <result column="CGCSHF" jdbcType="VARCHAR" property="cgcshf" />
    <result column="DBSXHF" jdbcType="VARCHAR" property="dbsxhf" />
    <result column="HFNR" jdbcType="VARCHAR" property="hfnr" />
    <result column="ZT" jdbcType="CHAR" property="zt" />
    <result column="CJRQ" jdbcType="VARCHAR" property="cjrq" />
    <result column="CJSJ" jdbcType="VARCHAR" property="cjsj" />
    <result column="DLID" jdbcType="DECIMAL" property="dlid" />
    <result column="DBLB" jdbcType="CHAR" property="dblb" />
    <result column="JMTX" jdbcType="CHAR" property="jmtx" />
    <result column="DXTX" jdbcType="CHAR" property="dxtx" />
    <result column="DXTXDH" jdbcType="VARCHAR" property="dxtxdh" />
    <result column="HDMBID" jdbcType="DECIMAL" property="hdmbid" />
  </resultMap>
 
  <resultMap class="com.slf.engine.bo.LsDbdx" id="result1">
    <result column="DBDXID" jdbcType="DECIMAL" property="dbdxid" />
    <result column="YXSJ" jdbcType="VARCHAR" property="yxsj" />
    <result column="SXSJ" jdbcType="VARCHAR" property="sxsj" />
    <result column="DJDBCS" jdbcType="DECIMAL" property="djdbcs" />
    <result column="ZDBCS" jdbcType="DECIMAL" property="zdbcs" />
    <result column="CGCSHF" jdbcType="VARCHAR" property="cgcshf" />
    <result column="DBSXHF" jdbcType="VARCHAR" property="dbsxhf" />
    <result column="HFNR" jdbcType="VARCHAR" property="hfnr" />
    <result column="DBLB" jdbcType="CHAR" property="dblb" />
    <result column="HDMBID" jdbcType="DECIMAL" property="hdmbid" />
  </resultMap>
 
  <select id="getDbdxByGjz" parameterClass="com.slf.engine.bo.LsDbdx" resultMap="result1">
  	select t.dbdxid,
	       t.yxsj,
	       t.sxsj,
	       t.djdbcs,
	       t.zdbcs,
	       t.cgcshf,
	       t.dbsxhf,
	       t.hfnr,
	       t.dblb,
	       t.hdmbid
	  from $tableUser$ls_dbdx t
	 where t.dbgjz = #dbgjz#
	   and t.zt = '1'
	   and t.dlid = #dlid#
  <![CDATA[
		and (t.djdbcs < t.zdbcs or t.zdbcs = 0)
  ]]>
  </select>
  
  <update id="updateDbfs" parameterClass="com.slf.engine.bo.LsDbdx">
  	update $tableUser$ls_dbdx t set t.djdbcs = #djdbcs# where t.dbdxid = #dbdxid#
  </update>
  
</sqlMap>